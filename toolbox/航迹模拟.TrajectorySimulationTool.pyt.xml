<?xml version="1.0"?>
<metadata xml:lang="zh"><Esri><CreaDate>20240917</CreaDate><CreaTime>22124800</CreaTime><ArcGISFormat>1.0</ArcGISFormat><SyncOnce>TRUE</SyncOnce><ModDate>20240917</ModDate><ModTime>23485300</ModTime><scaleRange><minScale>150000000</minScale><maxScale>5000</maxScale></scaleRange><ArcGISProfile>ItemDescription</ArcGISProfile></Esri><tool name="TrajectorySimulationTool" displayname="航迹模拟工具" toolboxalias="TrajectorySimulationToolbox" xmlns=""><arcToolboxHelpPath>c:\program files\arcgis\pro\Resources\Help\gp</arcToolboxHelpPath><parameters><param name="input_features" displayname="输入多边形要素类" type="Required" direction="Input" datatype="要素图层" expression="input_features"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;包含模拟区域的多边形要素类&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;包含模拟区域的多边形要素类&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="output_folder" displayname="输出文件夹" type="Required" direction="Input" datatype="文件夹" expression="output_folder"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;存储模拟结果的文件夹路径&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;存储模拟结果的文件夹路径&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="output_name" displayname="输出要素类名称" type="Required" direction="Input" datatype="字符串" expression="output_name"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;模拟生成的轨迹要素类的名称&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;模拟生成的轨迹要素类的名称&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="person_num_field" displayname="人员编号字段" type="Optional" direction="Input" datatype="字段" expression="{person_num_field}"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;包含人员编号的字段（如果有），工具会根据指定的人员编号，进行航迹模拟&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;包含人员编号的字段（如果有），工具会根据指定的人员编号，进行航迹模拟&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="start_time_field" displayname="起始时间字段" type="Optional" direction="Input" datatype="字段" expression="{start_time_field}"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;包含起始时间的字段（如果有），指的是对应航迹的起点开始时间&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;包含起始时间的字段（如果有），指的是对应航迹的起点开始时间&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="config_path" displayname="配置文件路径" type="Optional" direction="Input" datatype="文件" expression="{config_path}"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;模拟参数的JSON配置文件路径，具体配置信息如下：&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;{&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    "persons": [&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        {&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "number": 1, # 人员编号&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "max_speed": 1.5, # 最快行走速度 m/s&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "min_speed": 0.5, # 最慢行走速度 m/s&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "max_stamina": 100, # 最大体力值，体力值越高，连续工作时间越长&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "stamina_consumption_base": 0.05, # 行走时每一秒消耗体力值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "stamina_recovery_rate": 0.1, #每秒恢复的体力值(休息时)&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "walking_recovery_factor": 0.2, #行走时恢复速度为休息时的比例&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "min_stamina_to_walk": 20, # 最底可行走体力阈值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "max_deviation_angle": 0.2617993878, # 最大偏航值（正负都包含），弧度&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "deviation_probability": 0.3 # 偏航概率，概率越低，行走路线较原图形越贴近&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        },&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        ...&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    ],&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    "simulation_params": {&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "sample_distance": 10, # 采样距离，指每个多少米，记录一个点&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "simulate_backtrack": false, # 是否模拟回头，回头指的时，有一定几率朝前一个多边形目标点行走&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "back_count": 2, # 最大回头次数&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "back_probability": 0.05, #回头概率&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "max_retries": 100, # 如果生成的航迹对应的多边形的面积与原多边形面积的比，不在 [area_tolerance_min,area_tolerance_max]内，则重新生成的最多次数&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "area_tolerance_min": 0.95, # 最多面积偏差阈值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "area_tolerance_max": 0.99 # 最少面积偏差阈值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    }&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;}&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;模拟参数的JSON配置文件路径，具体配置信息如下：&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;{&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    "persons": [&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        {&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "number": 1, # 人员编号&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "max_speed": 1.5, # 最快行走速度 m/s&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "min_speed": 0.5, # 最慢行走速度 m/s&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "max_stamina": 100, # 最大体力值，体力值越高，连续工作时间越长&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "stamina_consumption_base": 0.05, # 行走时每一秒消耗体力值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "stamina_recovery_rate": 0.1, #每秒恢复的体力值(休息时)&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "walking_recovery_factor": 0.2, #行走时恢复速度为休息时的比例&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "min_stamina_to_walk": 20, # 最底可行走体力阈值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "max_deviation_angle": 0.2617993878, # 最大偏航值（正负都包含），弧度&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;            "deviation_probability": 0.3 # 偏航概率，概率越低，行走路线较原图形越贴近&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        },&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        ...&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    ],&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    "simulation_params": {&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "sample_distance": 10, # 采样距离，指每个多少米，记录一个点&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "simulate_backtrack": false, # 是否模拟回头，回头指的时，有一定几率朝前一个多边形目标点行走&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "back_count": 2, # 最大回头次数&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "back_probability": 0.05, #回头概率&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "max_retries": 100, # 如果生成的航迹对应的多边形的面积与原多边形面积的比，不在 [area_tolerance_min,area_tolerance_max]内，则重新生成的最多次数&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "area_tolerance_min": 0.95, # 最多面积偏差阈值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;        "area_tolerance_max": 0.99 # 最少面积偏差阈值&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;    }&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;}&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="dem_paths" displayname="DEM数据" type="Optional" direction="Input" datatype="多值" expression="{dem_paths;dem_paths...}"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;高程数据路径，建议使用 .tif 数据&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;高程数据路径，建议使用 .tif 数据&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="callback_fields" displayname="查询字段" type="Required" direction="Input" datatype="多值" expression="callback_fields;callback_fields..."><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;用于生成轨迹名称的所需的字段列表&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;用于生成轨迹名称的所需的字段列表&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param><param name="callback_code" displayname="回调函数代码" type="Required" direction="Input" datatype="字符串" expression="callback_code"><dialogReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;用于生成轨迹名称的Python回调函数代码&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</dialogReference><pythonReference>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;用于生成轨迹名称的Python回调函数代码&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</pythonReference></param></parameters><summary>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;通过给定多边形，模拟人为行走的航迹。支持高程，时间，模拟程度等自定义配置。&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;</summary><scriptExamples><scriptExample><title>生成航迹</title><para>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;高程获取需使用ArcgisElevationProvider&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</para><code>    config_path = r"path\to\config.json"
    input_features = r"path\to\input\features"
    output_folder = r"path\to\output\folder"
    
    # 创建自定义的高程提供者（如果需要）
    # custom_elevation_provider = YourCustomElevationProvider()
    
    # 使用默认高程提供者
    simulator = TrajectorySimulator(config_path)
    
    # 或使用自定义高程提供者
    # simulator = TrajectorySimulator(config_path, elevation_provider=custom_elevation_provider)
    
    index_dict = {}
    def naming_callback(row):
        key = f"{row[1]}_{row[2]}"
        if key not in index_dict:
            index_dict[key] = 0
        index = index_dict[key]
        index_dict[key] += 1
        return f"{key}_{index}"
    
    callback_fields = ['林场', '林班']
    
    simulator.simulate_trajectories(input_features, output_folder, 
                                    person_num_field='PERSON_NUM',
                                    start_time_field='START_TIME',
                                    callback=naming_callback, 
                                    callback_fields=callback_fields)</code></scriptExample></scriptExamples></tool><dataIdInfo><idCitation><resTitle>航迹模拟工具</resTitle></idCitation><idCredit>伊图里河森林调查大队孙国财</idCredit><searchKeys><keyword>数据管理</keyword></searchKeys><resConst><Consts><useLimit>&lt;DIV STYLE="text-align:Left;"&gt;&lt;DIV&gt;&lt;P&gt;&lt;SPAN&gt;仅限技术交流使用&lt;/SPAN&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;</useLimit></Consts></resConst></dataIdInfo><distInfo><distributor><distorFormat><formatName>ArcToolbox Tool</formatName></distorFormat></distributor></distInfo><mdHrLv><ScopeCd value="005"></ScopeCd></mdHrLv><mdDateSt Sync="TRUE">20240917</mdDateSt></metadata>
